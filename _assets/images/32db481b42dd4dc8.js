(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[27539],{

/***/ 759734:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(293444);self._5f74ec40302898c5a55451c9fbd04240 = self._5f74ec40302898c5a55451c9fbd04240 || {};(function(__c) {var mb=__c.mb;var Y=__c.Y;var X=__c.X;var C=__c.C;var G=__c.G;var Ga=__c.Ga;var Fa=__c.Fa;var B=__c.B;
var rRb=function(a){let b,c;switch(a.type){case 0:b=a.Jd;c=new pRb({arity:1,multiple:!1,options:a.options.map(d=>new qRb({label:d.label,value:d.id}))});break;case 1:b=a.value;c=new RW({arity:1});break;case 2:b=a.value;c=new RW({arity:1});break;default:throw new B(a);}return new __c.SW({value:b,Wc:new __c.TW({id:a.uh,label:a.ni,Wc:c})})},sRb=function(a){const b=a.Wc.Wc,c={uh:a.Wc.id,ni:a.Wc.label};switch(b.type){case "SELECT_FIELD":return{...c,type:0,Jd:a.value,options:b.options.map(d=>({id:d.value,
label:d.label}))};case "TEXT_FIELD":return{...c,type:1,value:a.value};case "EMAIL_FIELD":throw Error("Not implemented");case "NUMBER_FIELD":throw Error("Not implemented");default:throw new B(b);}},tRb=function(a){return{id:a.id,status:a.status,tk:new Map(a.tk.map(b=>[b.Wc.id,sRb(b)]))}},uRb=function(a,b){return{jV:c=>{const d=a.sb.xk[0];return d?d.Mda.includes(c):!1},xk:new Map(a.sb.xk.map(c=>[c.uh,c.Mda])),B0:a.sb.pSa?"anon":"public",RF:b}},vRb=function(a,b){const {initialDelay:c,ZI:d=1.6,HJ:e,VQ:f,
nN:g,signal:h,zja:k}=b;__c.u(d>1,"increaseFactor (${increaseFactor}) must be greater than 1");return __c.Oka(a,l=>{l=Math.min(c*Math.pow(d,l),e);const m=k?.();return m!==void 0?Math.max(l,m):l},{VQ:f,nN:g,signal:h})},wRb=function({Kc:a,Lc:b}){return`${a}:${b}`},xRb=async function(a){if(![2,1,4].includes(a._status)){var b=a.Lc,c=a.Kc;UW(()=>{a._status=2});try{await a.K_.DI(new __c.VW({ref:{Lc:b,Kc:c,km:void 0},Af:a.Af,Dj:WW(a)})),UW(()=>{a._status=4})}catch(d){UW(()=>{a._status===2&&(a._status=d instanceof
__c.qG?1:5)})}}},WW=function(a){return a.source.type==="website"?a.source.Dj:void 0},XW=async function(a){return a.nE.then(()=>Fa(),()=>Ga())},BRb=async function(a,b,c,d){d=d.map(e=>rRb(e));try{const e=await a.lm.Qpa(new __c.yRb({XK:b.id,Lc:a.Lc,fingerprint:c,Kc:a.Kc,Af:a.Af,tk:d,Dj:WW(a),caller:b.submitter,ita:zRb(a,c)}));switch(e.type){case "SUCCESS":const f=a.yx(c);f.LO=e.Et.id;f.eB=e.Et;return ARb(e);case "ERROR":return a.N.Cb(new YW("edit submission failed")),Ga({Gp:1});default:throw new B(e);
}}catch{return Ga({Gp:1})}},ERb=function(a){const b=a.Kc;return a.source.type==="website"?new CRb({gWa:b}):new DRb({Kc:b})},FRb=async function(a,b,c,d,e){switch(b.code){case 3:return a.N.Cb(new YW("unknown form")),Ga({Gp:2});case 1:case 2:try{if(!(await a.$fa({ag:c,$f:e})).ok)return a.N.Cb(new YW("backfill submission failed")),Ga({Gp:3});const {eB:f}=a.yx(c);if(f?.tk.length)return BRb(a,f,c,d);a.N.Cb(new YW("empty submission"));return Ga({Gp:5})}catch(f){return a.N.Cb(f),Ga({Gp:1})}default:throw new B(b.code);
}},zRb=function(a,b){({eB:a}=a.yx(b));a=a?.submitter;return a?.type==="ANON"?a:void 0},GRb=function(a,b){return b.some(c=>c===5)&&a.source.type==="website"?2:void 0},ARb=function(a){var b=a.Et;a=a.xk;__c.v(b!=null);const c=new Map(a.map(d=>[d.uh,d.Mda]));b=tRb(b);a=__c.ie(b.tk,(d,e)=>{d=c.get(e);return{uh:e,feedback:d?.length?{xk:d}:void 0}});return Fa({Et:b,result:{UD:a}})},ZW=__webpack_require__(186901),UW=ZW.h5,HRb=ZW.mJ,IRb=ZW.sH;var JRb=__webpack_require__(226260).c;__c.$W=G(()=>({type:C("A?",2,"ANON"),clientId:X(1)}));__c.aX=G(()=>({type:C("A?",1,"USER"),brand:X(1),user:X(2),GW:Y(3)}));__c.bX=__c.lb(()=>({type:[1,__c.aX,2,__c.$W]}),()=>({}));__c.cX=()=>({XK:X(1),Lc:X(2),Kc:X(6),fingerprint:X(7),Af:Y(5),Dj:Y(8),ita:__c.F(9,__c.$W),caller:__c.F(12,__c.bX)});__c.KRb=G(()=>({...__c.cX(),type:C("A?",4,"ARCHIVE")}));var LRb=mb(()=>[1,2]);var dX=()=>({arity:__c.Va(1,LRb)});var MRb=G(()=>({...dX(),type:C("A?",7,"NUMBER_FIELD"),min:__c.lH(13),max:__c.lH(14)}));var NRb=G(()=>({...dX(),type:C("A?",8,"EMAIL_FIELD")}));var RW=G(()=>({...dX(),type:C("A?",9,"TEXT_FIELD")}));var qRb=G(()=>({label:X(1),value:X(2)}));var pRb=G(()=>({...dX(),type:C("A?",10,"SELECT_FIELD"),options:__c.Ua(11,qRb),multiple:__c.rH(12)}));var ORb=__c.lb(()=>({type:[7,MRb,8,NRb,9,RW,10,pRb]}),dX);__c.TW=G(()=>({id:X(1),label:X(2),Wc:__c.Ta(3,ORb)}));__c.SW=G(()=>({Wc:__c.Ta(3,__c.TW),value:X(2)}));__c.yRb=G(()=>({...__c.cX(),type:C("A?",3,"EDIT"),tk:__c.Ua(10,__c.SW),submitter:__c.F(11,__c.bX)}));__c.eX=G(()=>({Kc:X(1),Lc:X(2),km:Y(3)}));__c.PRb=mb(()=>[1,2,3,4,5,7,8,9],1);__c.fX=mb(()=>[1,2]);__c.VW=G(()=>({ref:__c.Ta(1,__c.eX),bX:__c.Xa(2,__c.PRb),Y8:__c.Wa(6,__c.fX),$f:Y(4),Af:Y(3),Dj:Y(5)}));__c.gX=G(()=>({uh:X(1),Mda:__c.qH(2)}));__c.QRb=mb(()=>[1,2]);__c.hX=mb(()=>[1,2]);var RRb=G(()=>({Qz:Y(1),limit:__c.jH(2,100),Af:Y(3),Qna:__c.Wa(7,__c.QRb),status:__c.Wa(8,__c.hX),$f:Y(20),type:C("A?",6,"BY_CALLER"),Kc:X(11),Lc:X(12),km:Y(13),Dj:Y(14)}));var CRb=G(()=>({type:C("A?",1,"WEBSITE"),gWa:X(1)}));var SRb=G(()=>({type:C("A?",2,"PREVIEW")}));var DRb=G(()=>({type:C("A?",3,"DESIGN"),Kc:X(1)}));__c.TRb=__c.lb(()=>({type:[1,CRb,2,SRb,3,DRb]}),()=>({}));__c.URb=G(()=>({Dha:X(1),Lc:X(2),km:X(3),$f:Y(10),source:__c.Ta(4,__c.TRb),tk:__c.Ua(5,__c.SW),Tt:Y(6),AM:Y(7),Fka:Y(8),Af:Y(9),Dj:Y(11)}));var VRb=class{DI(a){const b=this.bufferData;if(b){b.buffer.push(a);const e=b.buffer.length-1;return b.bTa.then(f=>({form:f.bma[e].form,sX:f.sX}))}const c=this.S8a,d=[a];a=new Promise((e,f)=>{c(async()=>{this.bufferData=void 0;try{const g=await this.lm.iAa({PIa:d});e(g)}catch(g){f(g)}},500)});this.bufferData={buffer:d,bTa:a};return a.then(e=>({form:e.bma[0].form,sX:e.sX}))}constructor(a){var b=setTimeout;this.lm=a;this.S8a=b}};var WRb=class{start(){if(this.GM)return this.GM;let a,b=!1;const c=async()=>{a=vRb(this.Y$a,{initialDelay:this.qa.initialDelay,ZI:this.qa.ZI,HJ:this.qa.HJ,zja:this.qa.zja,nN:!0});try{const d=await a.result;b||this.effect(d)}catch{}finally{b||c()}};c();return this.GM=()=>{b=!0;a?.cancel();this.GM=void 0}}cancel(){this.GM&&this.GM()}constructor(a,b,c){this.Y$a=a;this.effect=b;this.qa=c}};var XRb,YW;__c.YRb=class{get(a){a=this.getContext(a);xRb(a);return a}zc(a){const b=this.getContext(a);b.c1(a);return b}getContext({Lc:a,Kc:b,Af:c}){const d=wRb({Kc:b,Lc:a}),e=this.contexts.get(d);if(e)return e;a=new XRb(a,b,c,this.K_,this.lm,this.N,this.source);this.contexts.set(d,a);return a}constructor(a,b,c={type:"design"}){this.lm=a;this.N=b;this.source=c;this.contexts=new Map;this.K_=new VRb(a)}};
XRb=class{static F(a){__c.N(a,{_status:IRb.ref})}get status(){switch(this._status){case 0:case 2:case 3:return 1;case 4:return 2;case 5:case 1:return 3;default:throw new B(this._status);}}get nE(){return new Promise((a,b)=>{HRb(()=>this.status,(c,d,e)=>{switch(c){case 2:a();e.dispose();break;case 3:b(Error("Form initialization errored."));e.dispose();break;case 1:break;default:throw new B(c);}},{fireImmediately:!0})})}getSettings(a){return new JRb(b=>{const c=HRb(()=>a.r_a(),async d=>{if(d){const e=
this.D8.get(d);if(e){b.next({status:1,data:e});return}}try{b.next({status:2});await this.nE;const {form:e,yea:f}=await this.lm.DI(new __c.VW({ref:new __c.eX({Lc:this.Lc,Kc:this.Kc}),$f:d,Af:this.Af,Dj:WW(this),bX:[8]})),g=uRb(e.sb,f);d&&this.D8.set(d,g);b.next({status:1,data:g})}catch(e){b.next((0,__c.QW)({$f:d})),this.N.Cb(e)}},{fireImmediately:!0});return()=>c()})}async s_a(a){if(a){const b=this.D8.get(a);if(b)return Fa(b)}try{await this.nE;const {form:b,yea:c}=await this.lm.DI(new __c.VW({ref:new __c.eX({Lc:this.Lc,
Kc:this.Kc}),$f:a,Af:this.Af,Dj:WW(this),bX:[8]})),d=uRb(b.sb,c);a&&this.D8.set(a,d);return Fa(d)}catch(b){return this.N.Cb(b),Ga()}}async $fa(a){const b=this.yx(a.ag);if(b.UN)return b.UN;if(!(await XW(this)).ok)return Ga();b.UN=this.lm.pza(new RRb({Lc:this.Lc,km:a.ag,Kc:this.Kc,Af:this.Af,Qna:2,Dj:WW(this),$f:a.$f})).then(({Zi:c})=>{const d=(c=c.find(e=>e.status===1&&e.B3.km===a.ag))?tRb(c):void 0;b.LO=d?.id;b.eB=c;return Fa(d)}).catch(()=>Ga()).finally(()=>{b.UN=void 0});return b.UN}async pDa({$f:a,
ag:b,tk:c}){if(!(await XW(this)).ok)return Ga({Gp:7});const d=this.yx(b);await d.UN;const e=this.Lc,f=this.Af;this.rX?.cancel();const g=c.map(k=>rRb(k));let h;try{if(d.eB)return BRb(this,d.eB,b,c);const k=__c.pd();h=await this.lm.fwa(new __c.URb({Dha:k,Lc:e,km:b,$f:a,Af:f,tk:g,source:ERb(this),Dj:WW(this)}))}catch(k){return Ga({Gp:1})}finally{this.rX?.start()}switch(h.type){case "SUCCESS":return __c.v(h.Et!=null),d.LO=h.Et.id,d.eB=h.Et,ARb(h);case "ERROR":return FRb(this,h,b,c,a);default:throw new B(h);
}}async Y7a({ag:a}){if(!(await XW(this)).ok)return Ga();const b=this.yx(a);await b.UN;const c=this.Lc,d=this.Kc,e=this.Af;if(!b.LO)return Fa();this.rX?.cancel();try{const f=await this.lm.Qpa(new __c.KRb({XK:b.LO,Lc:c,Kc:d,fingerprint:a,Af:e,Dj:WW(this),caller:b.eB?.submitter,ita:zRb(this,a)}));switch(f.type){case "SUCCESS":return b.LO=void 0,b.eB=void 0,Fa();case "ERROR":return Ga();default:throw new B(f);}}catch{return Ga()}finally{this.rX?.start()}}yx(a){var b=this.HMa.get(a);if(b)return b;b={ag:a,
LO:void 0,eB:void 0};this.HMa.set(a,b);return b}async c1(a){if(![4,3].includes(this._status)){UW(()=>{this._status=3});try{await this.lm.c1({Lc:this.Lc,Kc:this.Kc,Af:this.Af,$f:a.$f,sb:a.Xvb}),UW(()=>{this._status=4})}catch(b){UW(()=>{b instanceof __c.rG?this._status=4:this._status===3&&(this._status=5)})}}}constructor(a,b,c,d,e,f,g={type:"design"}){this.Lc=a;this.Kc=b;this.Af=c;this.K_=d;this.lm=e;this.N=f;this.source=g;this._status=(XRb.F(this),0);this.HMa=new Map;this.D8=new Map;this.eDa=h=>{let k=
[],l;const m=async()=>{try{const w=h.yAa();var n=this.Lc,p=this.Kc;const x=this.Af,z=[5];await this.nE;const {form:A,sX:D}=await this.K_.DI(new __c.VW({ref:new __c.eX({Lc:n,Kc:p,km:w}),bX:z,Af:x,Dj:WW(this),Y8:GRb(this,z)}));l=D!=null?D*1E3:void 0;a:{n=k;var q=A.UD;if(n.length!==q.length)var r=!1;else{for(p=0;p<n.length;p++)if(n[p].version!==q[p].version){r=!1;break a}r=!0}}if(!r){var t=k=A.UD;const E=new Map;for(const H of t){if(H.type!=="SELECT")continue;let J=E.get(H.uh);J||(J={id:H.uh,bt:new Map,
total:0},E.set(H.uh,J));for(const K of H.OMa){const M=K.DW,Q=J.bt.get(M)??0;J.bt.set(M,Q+K.toa);J.total+=K.toa}}return{ag:w,results:{fields:E}}}}catch(w){this.N.Cb(w)}};return new JRb(n=>{const p=new WRb(()=>m(),r=>n.next(r),{initialDelay:1E3,ZI:2,HJ:6E4,zja:()=>l}),q=p.start();this.rX=p;return()=>{q();this.rX=void 0}})}}};YW=class extends Error{constructor(a){super(`form: unexpected "${a}"`)}};__c.ZRb=G(()=>({Amb:__c.nH(1),tdb:__c.nH(2),pSa:__c.rH(4),xk:__c.Ua(3,__c.gX)}));
}).call(self, self._5f74ec40302898c5a55451c9fbd04240);}

}])
//# sourceMappingURL=sourcemaps/32db481b42dd4dc8.js.map